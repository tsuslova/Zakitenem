GET /main
===============
Список всех доступных ресурсов API
{
"auth":"/auth",
"password_tools":"/password/tools",
"password_request":"/password/request",
}


POST /auth 
===============
sample:
curl -v -b cookies.txt -c cookies.txt -d '{"login":"todtcdoccd4", "device_id":"2123", "password":"234"}' http://localhost:8080/api/auth


PARAM {"login":"Toto", "password":"test", "device_id":"id", "device_token":"token"}
login - required
password - optional
primary_device_id - required
device_token - optional

Response:
 OK case: 
- status code 200 
- cookie with quite long expiration period
- JSON response: the user data
  1. Если первый логин, то особой инфы не будет, только логин:
   {"user":{"login":"Toto"}}
  2. Если повторный, то все поля заполнены:
   {"user":{"login":"Toto", "email":"test@test.com", "phone":"12321", "gender":false,"userpic":"https://www.facebook.com/photo.php?fbid=719668528066557&set=a.204239416276140.50907.100000702482882&type=1&theater", "region":"Nsk"}}    
    

 Error cases:
 Common format: {"error_message":"error text", "error_code": 100500}
 - error_code = 100500
	"error_message":"Account used".
	Поведение приложения: предложить вбить пользователю пароль, если это его аккаунт или выбрать себе другой аккаунт. 
 - error_code = 100501 
	"error_message":"Wrong password".
	Возвращается, если введенный пользователем пароль не соответствует логину. Поле пароля надо очистить и как-то подсветить. Предложить пользователю проверить ввод пароля или сменить пароль.
 - error_code = 100502 
	"error_message":"Too frequent request".
	Возвращается, если вызывать метод слишком часто. Пользователю ничего показывать не надо, т.к. такая ситуация не должна происходить: без изменений в поле ввода и прохода локальной валидации, вызывать метод повторно нельзя.

Важно про cookie: она периодически протухает, в этом случае с девайса надо молча перелогиниться. Если, внезапно, попытка "перелогина" не прошла то разбираем ситуацию:
1. Нет интернета: даем юзеру пользоваться своим аккаунтом до появления интернета. Пока не оч понятно как это делать, но делать надо.
2. Интернет есть, но возвращается ошибка (100500,100501,100502) - переадресовываем пользователя на экран логина и говорим, что возможно ваш логин взломан или вы запросили сброс пароля с другого девайса. 
	Если первое - пиши в техподдержку (она сделает password/set) (открываем message composer)
	Если второе - вбейте, пожалуйста, смененный пароль или запросите его снова (push или email: password_tools -> request_password -> если опять никак письмо в техподдержку)

GET /password/tools
==============================
OK case: 
- status code 200 
{"tools":{"email","push":("22/09/2014", "02/10/2014")}}. 
Показать пользователю, какими способами он может получить пароль. 
Варианты tool: email, push, в дальнейшем добавится sms. Если девайсов зарегано несколько, можно предложить выбрать на какой послать по дате регистрации.

Error cases: 
Common format: {"error_message":"error text", "error_code": 100600}
 - error_code = 100600
	"error_message":"No tools".
	Шлем юзера в баню. Пусть достает primary device, вбивает там email, разрешает пуши и т.д.
	Если primary device уже ушел, предлагаем написать письмо в тех поддержку, мол, "это я, я - Вася Пупкин! Помнишь давал тебе Infinity-board затестить? А теперь твое приложение меня с нового iPhone не пускает..." Если тех.поддержка не пропила остатки памяти и вспомнила тот случай, то временно задизаблит пользователя методом установит 

POST /password/request 
==============================
PARAM {"tool":"email"}
Варианты tool: email, push, в дальнейшем добавится sms
	Пароль можно получить push-нотификацией на primary device или получить по email (в дальнейшем добавится sms), если были заведены необходимые данные/разрешены пуши.
OK cases: 
- status code 200 
{"tool":"email"} Показать пользователю, что пароль отправлен по email. Вернуль на экран аутентификации.
- status code 200 
{"tool":"push"} Показать пользователю, что пароль отправлен в нотификации. Вернуль на экран аутентификации.

Error cases: 
Common format: {"error_message":"error text", "error_code": 100700}
 - error_code = 100600
	"error_message":"Account used".



POST /password/set
==============================
Важно: вызов только из под супер-пупер админа
PARAM {"login":"pupkin", "email":"pupkin@mail.ru", "password":"193rfhwiHSD"}
Генерит пароль, устанавливает его по логину "login", оправляет его на переданный "email". Обязательно: unset_cookie для юзера


